<%- include('../partials/header'); %>

    <body class="vertical-layout vertical-menu 2-columns   menu-expanded fixed-navbar" data-open="click" data-menu="vertical-menu" data-color="bg-chartbg" data-col="2-columns">
        <%- include('../partials/nav'); %>
            <%- include('../partials/left'); %>



    <div class="app-content content">
        <div class="content-wrapper">
            <div class="content-body">
                <div class="blocks userDetails">
                    <a href="<%= process.env.APP_URL %>/companyprojects/<%= userlist.data.projects_id; %>">
                        <div class="userIcon">
                            <img src="/assets/images/ic_back.png" class="img-fluid" alt="" />
                        </div>
                    </a>
                    <div class="details">
                        <h4 class="m-0"><%= userlist.data.name; %></h4>
                        <p class="m-0">Here You Can Create And Assign New Tasks Or Edit An Existing Task</p>
                    </div>
                    <!-- <ul class="d-flex topInputs">
                        <li class="mr-1">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="basic-addon1">
                                        <i class="la la-calendar-o"></i>
                                    </span>
                                </div>

                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="basic-addon1">
                                        <i class="la la-calendar-o"></i>
                                    </span>
                                </div>
                            </div>
                        </li>
                        <li class="mr-1">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="basic-addon1">
                                        <i class="la la-calendar-o"></i>
                                    </span>
                                </div>
                                <input type="text" class="form-control" placeholder="2021-05-30 - 2021-06-28" aria-label="Username" aria-describedby="basic-addon1">
                            </div>
                        </li>
                        <li>
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1">
                                    <i class="la la-refresh"></i>
                                </span>
                            </div>
                        </li>
                    </ul> -->
                </div>

                <div class="blocks tabContainers mb-0">
                    <div class="d-flex align-items-start">
                        <div class="innerLeft">
                            <div class="d-flex align-items-center justify-content-between mt-1 mb-1">
                                <h5>Task Detail</h5>
                                <a href="#"><i class="la la-pencil"></i> Edit</a>
                            </div>
                            <ul class="d-flex align-items-center justify-content-between">
                                <li>Project</li>
                                <li><%= userlist.data.project.name; %></li>
                            </ul>
                            <ul class="d-flex align-items-center justify-content-between">
                                <li>Created By</li>
                                <li><%= userlist.data.user.firstname; %> <%= userlist.data.user.lastname; %></li>
                            </ul>
                            <ul class="d-flex align-items-center justify-content-between">
                                <li>Created Date</li>
                                <li><%  var str=userlist.data.startdate; %>
                                    <%= moment(str).tz('Asia/Calcutta').format('llll') %></li>
                            </ul>
                            <ul class="d-flex align-items-center justify-content-between">
                                <li>Status</li>
                                <li>In Process</li>
                            </ul>
                            <div class="d-flex align-items-center justify-content-between mt-1 mb-1">
                                <h5>Task Detail</h5>
                                <a href="#" data-toggle="modal" data-target="#addRemoveUserModal"><i class="la la-user-plus"></i> Assign User</a>
                            </div>
                            <ul class="d-flex align-items-center justify-content-between">
                                <li>Assigned To</li>
                                <li>
                                    <ul class="assignList">

                                         
                                        
                                        <%  var sstr=userlist.data.assignmultipleuser;
                            var stringarray= sstr.split(',');   
                                                             
                                     if(userlist.getuse.length > 0){
                                        
                       for(var s=0; s < 5; s++) {
var ssss=stringarray.includes(userlist.getuse[s].id);


                        if(ssss==false){ %>
                            <% var srr=userlist.getuse[s].firstname; 
                            var snerr=userlist.getuse[s].lastname; 
                            var res = srr.substring(0, 1); var nres = snerr.substring(0, 1);  %> <li><%=res; %> <%=nres; %></li>
 <% } }  %>
                           <li><%= userlist.getuse.length; %>+</li> 
                           <% } %>        
                                    </ul>
                                </li>
                            </ul>

                            <div class="cmntss">
                                <p></p>
                            </div>

                            <div class="commentInputContainer">
                               
                            </div>
                        </div>

                        <div class="productivityContainer flex-fill">
                            <div class="taskDesription">
                                <h4>Task Description</h4>
                                <p>Zoom Meeting, Google Meetings, Any Desk Meeting and any type of meeting so the person has to play this task.</p>
                            </div>

                            <div class="d-flex justify-content-between align-items-center mt-2">
                                <h4 class="tableHeading">Activity</h4>
                                <ul class="d-flex topInputs">

                                    <li class="mr-1">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="basic-addon1">
                                        <i class="la la-calendar-o"></i>
                                    </span>
                                            </div>
                                            <input type="text" class="form-control" placeholder="2021-05-30 - 2021-06-28" aria-label="Username" aria-describedby="basic-addon1">
                                        </div>
                                    </li>
                                    <li>
                                      
                                    </li>
                                </ul>
                            </div>
                            <div class="table-responsive">
                                <table id="zero_config" class="table table-striped table-bordered no-wrap">
                                    <thead>
                                        <tr>
                                            <th>Type </th>
                                            <th>Created By</th>
                                            <th>Key Press</th>
                                            <th>Mouse Clicked</th>
                                            <th>Mouse Moved</th>
                                            <th>Start Date</th>
                                            <th>End Date</th>
                                            <th>Manual</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <%  if(userlist.task.length > 0){
                                            var s=1; 
                       for(var i=0; i < userlist.task.length; i++) { %>
                        <tr>
                        <td>TASK</td>
                        <td><%= userlist.task[i].user.firstname; %> <%= userlist.task[i].user.lastname; %></td>
                        <td><%= userlist.task[i].keypress; %></td>
                        <td><%= userlist.task[i].mouseclicked; %></td>
                        <td><%= userlist.task[i].mousemoved; %></td>
                        <td> <%= moment(userlist.task[i].starttime).format('DD-MM-YYYY');  %></td>
                        <td> <%= moment(userlist.task[i].endtime).format('DD-MM-YYYY');  %></td>
                        <td> <%= userlist.task[i].manuallyend_time;  %></td>
                       </tr>
                        <% } }else{ %>
                            <tr>
                            <td class="text-center" colspan="4" style="color:red; ">
                               No Task Listed Yet
                             </td>
                            </tr>
                            <% }  %>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ////////////////////////////////////////////////////////////////////////////-->


    <script>
        // Disable form submissions if there are invalid fields
        (function() {
          'use strict';
          window.addEventListener('load', function() {
            // Get the forms we want to add validation styles to
            var forms = document.getElementsByClassName('needs-validation');
            // Loop over them and prevent submission
            var validation = Array.prototype.filter.call(forms, function(form) {
              form.addEventListener('submit', function(event) {
                document.getElementsByClassName("loader")[0].style.display = "block";
                if (form.checkValidity() === false) {
                  event.preventDefault();
                  event.stopPropagation();
                  document.getElementsByClassName("loader")[0].style.display = "none";
                }
                form.classList.add('was-validated');
              }, false);
            });
          }, false);
        })();
        </script>
        
    
    
    
    
    <%- include('../partials/footer'); %>